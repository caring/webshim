jQuery.webshims.register("form-number-date-api",function(a,c){var l,o,v;if(!c.getStep)c.getStep=function(e,c){var d=a.attr(e,"step");if("any"===d)return d;c=c||p(e);if(!g[c]||!g[c].step)return d;d=l.asNumber(d);return(!isNaN(d)&&0<d?d:g[c].step)*g[c].stepScaleFactor};if(!c.addMinMaxNumberToCache)c.addMinMaxNumberToCache=function(e,a,c){e+"AsNumber"in c||(c[e+"AsNumber"]=g[c.type].asNumber(a.attr(e)),isNaN(c[e+"AsNumber"])&&e+"Default"in g[c.type]&&(c[e+"AsNumber"]=g[c.type][e+"Default"]))};var k=
parseInt("NaN",10),g=c.inputTypes,q=function(e){return"number"==typeof e||e&&e==1*e},r=function(e){return a('<input type="'+e+'" />').prop("type")===e},p=function(e){return(e.getAttribute("type")||"").toLowerCase()},w=c.addMinMaxNumberToCache,s=function(e,a){for(var e=""+e,a=a-e.length,c=0;c<a;c++)e="0"+e;return e},j=c.bugs.valueAsNumberSet||c.bugs.bustedValidity;c.addValidityRule("stepMismatch",function(a,i,d,h){if(""===i)return!1;if(!("type"in d))d.type=p(a[0]);if("date"==d.type)return!1;h=(h||
{}).stepMismatch;if(g[d.type]&&g[d.type].step){if(!("step"in d))d.step=c.getStep(a[0],d.type);if("any"==d.step)return!1;if(!("valueAsNumber"in d))d.valueAsNumber=g[d.type].asNumber(i);if(isNaN(d.valueAsNumber))return!1;w("min",a,d);a=d.minAsNumber;isNaN(a)&&(a=g[d.type].stepBase||0);h=Math.abs((d.valueAsNumber-a)%d.step);h=!(1.0E-7>=h||1.0E-7>=Math.abs(h-d.step))}return h});[{name:"rangeOverflow",attr:"max",factor:1},{name:"rangeUnderflow",attr:"min",factor:-1}].forEach(function(a){c.addValidityRule(a.name,
function(c,d,h,b){b=(b||{})[a.name]||!1;if(""===d)return b;if(!("type"in h))h.type=p(c[0]);if(g[h.type]&&g[h.type].asNumber){if(!("valueAsNumber"in h))h.valueAsNumber=g[h.type].asNumber(d);if(isNaN(h.valueAsNumber))return!1;w(a.attr,c,h);if(isNaN(h[a.attr+"AsNumber"]))return b;b=h[a.attr+"AsNumber"]*a.factor<h.valueAsNumber*a.factor-1.0E-7}return b})});c.reflectProperties(["input"],["max","min","step"]);var t=c.defineNodeNameProperty("input","valueAsNumber",{prop:{get:function(){var e=p(this),e=g[e]&&
g[e].asNumber?g[e].asNumber(a.prop(this,"value")):t.prop._supget&&t.prop._supget.apply(this,arguments);null==e&&(e=k);return e},set:function(e){var i=p(this);g[i]&&g[i].numberToString?isNaN(e)?a.prop(this,"value",""):(i=g[i].numberToString(e),!1!==i?a.prop(this,"value",i):c.warn("INVALID_STATE_ERR: DOM Exception 11")):t.prop._supset&&t.prop._supset.apply(this,arguments)}}}),u=c.defineNodeNameProperty("input","valueAsDate",{prop:{get:function(){var e=p(this);return g[e]&&g[e].asDate&&!g[e].noAsDate?
g[e].asDate(a.prop(this,"value")):u.prop._supget&&u.prop._supget.call(this)||null},set:function(e){var i=p(this);if(g[i]&&g[i].dateToString&&!g[i].noAsDate){if(null===e)return a.prop(this,"value",""),"";i=g[i].dateToString(e);if(!1!==i)return a.prop(this,"value",i),i;c.warn("INVALID_STATE_ERR: DOM Exception 11")}else return u.prop._supset&&u.prop._supset.apply(this,arguments)||null}}});l={mismatch:function(a){return!q(a)},step:1,stepScaleFactor:1,asNumber:function(a){return q(a)?1*a:k},numberToString:function(a){return q(a)?
a:!1}};o={minDefault:0,maxDefault:100};v={mismatch:function(e){if(!e||!e.split||!/\d$/.test(e))return!0;var c=e.split(/\u002D/);if(3!==c.length)return!0;var d=!1;a.each(c,function(a,b){if(!(q(b)||b&&b=="0"+1*b))return d=!0,!1});if(d)return d;if(4!==c[0].length||2!=c[1].length||12<c[1]||2!=c[2].length||33<c[2])d=!0;return e!==this.dateToString(this.asDate(e,!0))},step:1,stepScaleFactor:864E5,asDate:function(a,c){return!c&&this.mismatch(a)?null:new Date(this.asNumber(a,!0))},asNumber:function(a,c){var d=
k;if(c||!this.mismatch(a))a=a.split(/\u002D/),d=Date.UTC(a[0],a[1]-1,a[2]);return d},numberToString:function(a){return q(a)?this.dateToString(new Date(1*a)):!1},dateToString:function(a){return a&&a.getFullYear?a.getUTCFullYear()+"-"+s(a.getUTCMonth()+1,2)+"-"+s(a.getUTCDate(),2):!1}};if(j||!r("range")||!r("time"))o=a.extend({},l,o);(j||!r("number"))&&c.addInputType("number",l);(j||!r("range"))&&c.addInputType("range",o);(j||!r("date"))&&c.addInputType("date",v)});
jQuery.webshims.register("form-number-date-ui",function(a,c,l,o,v,k){var g=c.triggerInlineForm,q=Modernizr.inputtypes,r=function(){var a={"padding-box":"innerWidth","border-box":"outerWidth","content-box":"width"},b=Modernizr.prefixed&&Modernizr.prefixed("boxSizing");return function(f,c){var e,d,g;d="width";b&&(d=a[f.css(b)]||d);e=f[d]();d="width"==d;if(e){var n=parseInt(c.css("marginLeft"),10)||0,x=c.outerWidth();(g=parseInt(f.css("marginRight"),10)||0)&&f.css("marginRight",0);n<=-1*x?(c.css("marginRight",
Math.floor(Math.abs(x+n)+g)),f.css("paddingRight",(parseInt(f.css("paddingRight"),10)||0)+Math.abs(n)),d&&f.css("width",Math.floor(e+n))):(c.css("marginRight",g),f.css("width",Math.floor(e-n-x)))}}}(),p={},w=a([]),s,j=function(h,b){a("input",h).add(b.filter("input")).each(function(){var b=a.prop(this,"type");if(j[b]&&!c.data(this,"shadowData"))j[b](a(this))})},t=function(c,b){if(k.lazyDate){var f=a.data(c[0],"setDateLazyTimer");f&&clearTimeout(f);a.data(c[0],"setDateLazyTimer",setTimeout(function(){c.datepicker("setDate",
b);a.removeData(c[0],"setDateLazyTimer");c=null},0))}else c.datepicker("setDate",b)};if(k.lazyDate===v)try{k.lazyDate=a.browser.msie&&9>c.browserVersion||500>a(l).width()&&500>a(l).height()}catch(u){}var e={tabindex:1,tabIndex:1,title:1,"aria-required":1,"aria-invalid":1};if(!k.copyAttrs)k.copyAttrs={};c.extendUNDEFProp(k.copyAttrs,e);j.common=function(h,b,f){Modernizr.formvalidation&&h.bind("firstinvalid",function(a){(c.fromSubmit||!s)&&h.unbind("invalid.replacedwidgetbubble").bind("invalid.replacedwidgetbubble",
function(b){!a.isInvalidUIPrevented()&&!b.isDefaultPrevented()&&(c.validityAlert.showFor(a.target),a.preventDefault(),b.preventDefault());h.unbind("invalid.replacedwidgetbubble")})});var d,g,j=a("input, span.ui-slider-handle",b),i=h[0].attributes;for(d in k.copyAttrs)if((g=i[d])&&g.specified)e[d]&&j[0]?j.attr(d,g.nodeValue):b[0].setAttribute(d,g.nodeValue);g=h.attr("id");d=k.calculateWidth?{css:{marginRight:h.css("marginRight"),marginLeft:h.css("marginLeft")},outerWidth:h.outerWidth()}:{};d.label=
g?a('label[for="'+g+'"]',h[0].form):w;g=c.getID(d.label);b.addClass(h[0].className);c.addShadowDom(h,b,{data:f||{},shadowFocusElement:a("input.input-datetime-local-date, span.ui-slider-handle",b)[0],shadowChilds:j});h.after(b).hide();h[0].form&&a(h[0].form).bind("reset",function(a){a.originalEvent&&!a.isDefaultPrevented()&&setTimeout(function(){h.prop("value",h.prop("value"))},0)});1==b.length&&!a("*",b)[0]&&(b.attr("aria-labelledby",g),d.label.bind("click",function(){b.focus();return!1}));return d};
Modernizr.formvalidation&&["input","form"].forEach(function(a){var b=c.defineNodeNameProperty(a,"checkValidity",{prop:{value:function(){s=!0;var a=b.prop._supvalue.apply(this,arguments);s=!1;return a}}})});if(!q.date||k.replaceUI){var i=function(h,b,f,e){var d,g,j=function(){n.dpDiv.unbind("mousedown.webshimsmousedownhandler");g=d=!1},n=b.bind("focusin",function(){j();n.dpDiv.unbind("mousedown.webshimsmousedownhandler").bind("mousedown.webshimsmousedownhandler",function(){d=!0})}).bind("focusout blur",
function(a){d&&(g=!0,a.stopImmediatePropagation())}).datepicker(a.extend({onClose:function(){g&&b.not(":focus")?(j(),b.trigger("focusout"),b.triggerHandler("blur")):j()}},p,k.datepicker,h.data("datepicker"))).bind("change",f).data("datepicker");n.dpDiv.addClass("input-date-datepicker-control");e&&c.triggerDomUpdate(e[0]);["disabled","min","max","value","step"].forEach(function(a){var b=h.prop(a);""!==b&&("disabled"!=a||!b)&&h.prop(a,b)});return n},d=function(a,b){var c;b.dateFormat&&(c=b.dateFormat.replace(/y+/g,
"Year").replace(/(d+|o+|D+)/g,"Day").replace(/(m+|M+)/g,"Month"),a.attr("placeholder",c))};j.date=function(c){if(a.fn.datepicker){var b=a('<input class="input-date" type="text" />'),f=this.common(c,b,j.date.attrs),e=i(c,b,function(f){j.date.blockAttr=!0;var e;if(k.lazyDate){var d=a.data(b[0],"setDateLazyTimer");d&&(clearTimeout(d),a.removeData(b[0],"setDateLazyTimer"))}try{e=(e=a.datepicker.parseDate(b.datepicker("option","dateFormat"),b.prop("value")))?a.datepicker.formatDate("yy-mm-dd",e):b.prop("value")}catch(n){e=
b.prop("value")}c.prop("value",e);j.date.blockAttr=!1;f.stopImmediatePropagation();g(c[0],"input");g(c[0],"change")});d(b,e.settings);f.css&&(b.css(f.css),f.outerWidth&&b.outerWidth(f.outerWidth),e.trigger[0]&&r(b,e.trigger))}};j.date.attrs={disabled:function(c,b,f){a.prop(b,"disabled",!!f)},min:function(c,b,f){try{f=a.datepicker.parseDate("yy-mm-dd",f)}catch(e){f=!1}f&&a(b).datepicker("option","minDate",f)},max:function(c,b,f){try{f=a.datepicker.parseDate("yy-mm-dd",f)}catch(e){f=!1}f&&a(b).datepicker("option",
"maxDate",f)},value:function(c,b,f){if(!j.date.blockAttr){try{var e=a.datepicker.parseDate("yy-mm-dd",f)}catch(d){e=!1}e?t(a(b),e):a.prop(b,"value",f)}}}}if(!q.range||k.replaceUI)j.range=function(c){if(a.fn.slider){var b=a('<span class="input-range"><span class="ui-slider-handle" role="slider" tabindex="0" /></span>'),f=this.common(c,b,j.range.attrs);a("span",b).attr("aria-labelledby",f.label.attr("id"));f.label.bind("click",function(){a("span",b).focus();return!1});f.css&&(b.css(f.css),f.outerWidth&&
b.outerWidth(f.outerWidth));b.slider(a.extend(!0,{},k.slider,c.data("slider"))).bind("slide",function(a,b){if(a.originalEvent)j.range.blockAttr=!0,c.prop("value",b.value),j.range.blockAttr=!1,g(c[0],"input"),g(c[0],"change")});["disabled","min","max","step","value"].forEach(function(b){var f=c.attr(b),e;"value"==b&&!f&&(e=c.getShadowElement())&&(f=(a(e).slider("option","max")-a(e).slider("option","min"))/2);null!=f&&c.attr(b,f)})}},j.range.attrs={disabled:function(c,b,f){f=!!f;a(b).slider("option",
"disabled",f);a("span",b).attr({"aria-disabled":f+"",tabindex:f?"-1":"0"})},min:function(c,b,f){f=f?1*f||0:0;a(b).slider("option","min",f);a("span",b).attr({"aria-valuemin":f})},max:function(c,b,f){f=f||0===f?1*f||100:100;a(b).slider("option","max",f);a("span",b).attr({"aria-valuemax":f})},value:function(c,b,f){f=a(c).prop("valueAsNumber");isNaN(f)||(j.range.blockAttr||a(b).slider("option","value",f),a("span",b).attr({"aria-valuenow":f,"aria-valuetext":f}))},step:function(c,b,f){f=f&&a.trim(f)?1*
f||1:1;a(b).slider("option","step",f)}};if(!c.bugs.valueAsNumberSet&&(k.replaceUI||!Modernizr.inputtypes.date||!Modernizr.inputtypes.range))l=function(){c.data(this,"hasShadow")&&a.prop(this,"value",a.prop(this,"value"))},c.onNodeNamesPropertyModify("input","valueAsNumber",l),c.onNodeNamesPropertyModify("input","valueAsDate",l);a.each(["disabled","min","max","value","step"],function(a,b){c.onNodeNamesPropertyModify("input",b,function(a){var e=c.data(this,"shadowData");if(e&&e.data&&e.data[b]&&e.nativeElement===
this)e.data[b](this,e.shadowElement,a)})});if(!k.availabeLangs)k.availabeLangs="af ar ar-DZ az bg bs ca cs da de el en-AU en-GB en-NZ eo es et eu fa fi fo fr fr-CH gl he hr hu hy id is it ja ko kz lt lv ml ms nl no pl pt-BR rm ro ru sk sl sq sr sr-SR sv ta th tr uk vi zh-CN zh-HK zh-TW".split(" ");l=function(){a.datepicker&&(c.activeLang({langObj:a.datepicker.regional,module:"form-number-date-ui",callback:function(c){a("input.hasDatepicker").filter(".input-date, .input-datetime-local-date").datepicker("option",
a.extend(p,c,k.datepicker))}}),a(o).unbind("jquery-uiReady.langchange input-widgetsReady.langchange"))};a(o).bind("jquery-uiReady.langchange input-widgetsReady.langchange",l);l();(function(){var e=function(){var c={};return function(b){return b in c?c[b]:c[b]=a('<input type="'+b+'" />')[0].type===b}}();if(!e("number")){var b=c.cfg["forms-ext"],f=c.inputTypes,d=function(b,e,d){d=d||{};if(!("type"in d))d.type=a.prop(b,"type");if(!("step"in d))d.step=c.getStep(b,d.type);if(!("valueAsNumber"in d))d.valueAsNumber=
f[d.type].asNumber(a.prop(b,"value"));var g="any"==d.step?f[d.type].step*f[d.type].stepScaleFactor:d.step;c.addMinMaxNumberToCache("min",a(b),d);c.addMinMaxNumberToCache("max",a(b),d);if(isNaN(d.valueAsNumber))d.valueAsNumber=f[d.type].stepBase||0;if("any"!==d.step&&(b=Math.round(1E7*((d.valueAsNumber-(d.minAsnumber||0))%d.step))/1E7)&&Math.abs(b)!=d.step)d.valueAsNumber-=b;b=d.valueAsNumber+g*e;return b=!isNaN(d.minAsNumber)&&b<d.minAsNumber?d.valueAsNumber*e<d.minAsNumber?d.minAsNumber:isNaN(d.maxAsNumber)?
d.valueAsNumber:d.maxAsNumber:!isNaN(d.maxAsNumber)&&b>d.maxAsNumber?d.valueAsNumber*e>d.maxAsNumber?d.maxAsNumber:isNaN(d.minAsNumber)?d.valueAsNumber:d.minAsNumber:Math.round(1E7*b)/1E7};c.modules["form-number-date-ui"].getNextStep=d;var j=function(b,c,e){if(!b.disabled&&!b.readOnly&&!a(e).hasClass("step-controls")&&(a.prop(b,"value",f[c].numberToString(d(b,a(e).hasClass("step-up")?1:-1,{type:c}))),a(b).unbind("blur.stepeventshim"),g(b,"input"),o.activeElement)){if(o.activeElement!==b)try{b.focus()}catch(h){}setTimeout(function(){if(o.activeElement!==
b)try{b.focus()}catch(c){}a(b).one("blur.stepeventshim",function(){g(b,"change")})},0)}};if(b.stepArrows){var i={set:function(){var a=c.data(this,"step-controls");if(a)a[this.disabled||this.readonly?"addClass":"removeClass"]("disabled-step-control")}};c.onNodeNamesPropertyModify("input","disabled",i);c.onNodeNamesPropertyModify("input","readonly",a.extend({},i))}var k={38:1,40:-1};c.addReady(function(i,l){b.stepArrows&&a("input",i).add(l.filter("input")).each(function(){var i=a.prop(this,"type");
if(f[i]&&f[i].asNumber&&b.stepArrows&&!(!0!==b.stepArrows&&!b.stepArrows[i]||e(i)||a(m).hasClass("has-step-controls"))){var m=this,l=a('<span class="step-controls" unselectable="on"><span class="step-up" /><span class="step-down" /></span>').insertAfter(m).bind("selectstart dragstart",function(){return!1}).bind("mousedown mousepress",function(a){j(m,i,a.target);return!1}).bind("mousepressstart mousepressend",function(b){a(b.target)["mousepressstart"==b.type?"addClass":"removeClass"]("mousepress-ui")}),
o=function(b,c){if(!m.disabled&&!m.readOnly)return a.prop(m,"value",f[i].numberToString(d(m,c,{type:i}))),g(m,"input"),!1},n=a(m).addClass("has-step-controls").attr({readonly:m.readOnly,disabled:m.disabled,autocomplete:"off",role:"spinbutton"}).bind(a.browser.msie?"keydown":"keypress",function(b){if(!m.disabled&&!m.readOnly&&k[b.keyCode])return a.prop(m,"value",f[i].numberToString(d(m,k[b.keyCode],{type:i}))),g(m,"input"),!1});a.fn.mwheelIntent?n.add(l).bind("mwheelIntent",o):n.bind("focus",function(){n.add(l).unbind(".mwhellwebshims").bind("mousewheel.mwhellwebshims",
o)}).bind("blur",function(){a(m).add(l).unbind(".mwhellwebshims")});c.data(m,"step-controls",l);b.calculateWidth&&(r(n,l),l.css("marginTop",(n.outerHeight()-l.outerHeight())/2))}})})}})();c.addReady(function(d,b){a(o).bind("jquery-uiReady.initinputui input-widgetsReady.initinputui",function(){(a.datepicker||a.fn.slider)&&j(d,b);a.datepicker&&a.fn.slider?a(o).unbind(".initinputui"):c.modules["input-widgets"].src||c.warn('jQuery UI Widget factory is already included, but not datepicker or slider. configure src of $.webshims.modules["input-widgets"].src')})})});
